-- ข้อมูลเริ่มต้นสำหรับระบบบริหารจัดการแจ้งซ่อมและบริการด้าน IT
USE it_service_db;

-- 1. เพิ่มข้อมูลบทบาท (role)
INSERT INTO role (Role_ID, Role_Name) VALUES
(1, 'ผู้ดูแลระบบ'),
(2, 'เจ้าหน้าที่ IT'),
(3, 'บุคลากร');

-- 2. เพิ่มข้อมูลหน่วยงาน (department)
INSERT INTO department (Dept_Name) VALUES
('แผนกเทคโนโลยีสารสนเทศ'),
('แผนกผู้ป่วยนอก'),
('แผนกผู้ป่วยใน'),
('แผนกห้องฉุกเฉิน'),
('แผนกเภสัชกรรม'),
('แผนกรังสีวิทยา'),
('แผนกห้องปฏิบัติการ'),
('แผนกการเงินและบัญชี'),
('แผนกทรัพยากรบุคคล'),
('แผนกโภชนาการ');

-- 3. เพิ่มข้อมูลผู้ใช้ (users)
-- รหัสผ่านทั้งหมดคือ: password123 (ในการใช้งานจริงต้องเข้ารหัสด้วย bcrypt)
-- สำหรับตัวอย่างนี้ใช้ bcrypt hash ของ "password123": $2a$10$rqK7Z5Z5Z5Z5Z5Z5Z5Z5ZuO

-- ผู้ดูแลระบบ
INSERT INTO users (Role_ID, Dept_ID, Username, Password, Name, Tel, Email) VALUES
(1, 1, 'admin', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'ผู้ดูแลระบบ', '081-234-5678', 'admin@hospital.com');

-- เจ้าหน้าที่ IT
INSERT INTO users (Role_ID, Dept_ID, Username, Password, Name, Tel, Email) VALUES
(2, 1, 'it_staff1', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'สมชาย ใจดี', '081-111-2222', 'somchai@hospital.com'),
(2, 1, 'it_staff2', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'สมหญิง รักงาน', '081-333-4444', 'somying@hospital.com');

-- บุคลากรทั่วไป
INSERT INTO users (Role_ID, Dept_ID, Username, Password, Name, Tel, Email) VALUES
(3, 2, 'user001', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'นางสาวมานี สุขใจ', '081-555-6666', 'manee@hospital.com'),
(3, 3, 'user002', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'นายสมศักดิ์ ทำงาน', '081-777-8888', 'somsak@hospital.com'),
(3, 4, 'user003', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'นางสาววิไล ช่วยเหลือ', '081-999-0000', 'wilai@hospital.com'),
(3, 5, 'user004', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'นายประสิทธิ์ เภสัช', '082-111-2222', 'prasit@hospital.com'),
(3, 8, 'user005', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'นางสาวบัญชี การเงิน', '082-333-4444', 'banchee@hospital.com');

-- 4. เพิ่มข้อมูลครุภัณฑ์ (equipment)
INSERT INTO equipment (Asset_No, Equip_Name, Type, Dept_ID) VALUES
-- แผนกผู้ป่วยนอก
('PC-OPD-001', 'คอมพิวเตอร์ตั้งโต๊ะ Dell OptiPlex', 'คอมพิวเตอร์', 2),
('PC-OPD-002', 'คอมพิวเตอร์ตั้งโต๊ะ HP ProDesk', 'คอมพิวเตอร์', 2),
('PR-OPD-001', 'เครื่องพิมพ์ HP LaserJet', 'เครื่องพิมพ์', 2),
('SC-OPD-001', 'เครื่องสแกนเอกสาร Canon', 'สแกนเนอร์', 2),

-- แผนกผู้ป่วยใน
('PC-IPD-001', 'คอมพิวเตอร์ตั้งโต๊ะ Lenovo ThinkCentre', 'คอมพิวเตอร์', 3),
('PC-IPD-002', 'คอมพิวเตอร์ตั้งโต๊ะ Dell OptiPlex', 'คอมพิวเตอร์', 3),
('PR-IPD-001', 'เครื่องพิมพ์ Brother HL-L2375DW', 'เครื่องพิมพ์', 3),

-- แผนกห้องฉุกเฉิน
('PC-ER-001', 'คอมพิวเตอร์ตั้งโต๊ะ Dell OptiPlex', 'คอมพิวเตอร์', 4),
('PC-ER-002', 'คอมพิวเตอร์ตั้งโต๊ะ HP EliteDesk', 'คอมพิวเตอร์', 4),
('PR-ER-001', 'เครื่องพิมพ์ HP LaserJet Pro', 'เครื่องพิมพ์', 4),

-- แผนกเภสัชกรรม
('PC-PH-001', 'คอมพิวเตอร์ตั้งโต๊ะ Lenovo', 'คอมพิวเตอร์', 5),
('PR-PH-001', 'เครื่องพิมพ์ใบสั่งยา Epson', 'เครื่องพิมพ์', 5),
('BC-PH-001', 'เครื่องอ่านบาร์โค้ด Honeywell', 'บาร์โค้ดสแกนเนอร์', 5),

-- แผนกรังสีวิทยา
('PC-RAD-001', 'คอมพิวเตอร์ตั้งโต๊ะ Dell Precision', 'คอมพิวเตอร์', 6),
('PC-RAD-002', 'Workstation สำหรับดูภาพ', 'คอมพิวเตอร์', 6),

-- แผนกห้องปฏิบัติการ
('PC-LAB-001', 'คอมพิวเตอร์ตั้งโต๊ะ HP', 'คอมพิวเตอร์', 7),
('PR-LAB-001', 'เครื่องพิมพ์ผลแลป', 'เครื่องพิมพ์', 7),

-- แผนกการเงินและบัญชี
('PC-FIN-001', 'คอมพิวเตอร์ตั้งโต๊ะ Dell', 'คอมพิวเตอร์', 8),
('PC-FIN-002', 'คอมพิวเตอร์ตั้งโต๊ะ HP', 'คอมพิวเตอร์', 8),
('PR-FIN-001', 'เครื่องพิมพ์เช็ค', 'เครื่องพิมพ์', 8),

-- แผนกทรัพยากรบุคคล
('PC-HR-001', 'คอมพิวเตอร์ตั้งโต๊ะ Lenovo', 'คอมพิวเตอร์', 9),
('PR-HR-001', 'เครื่องพิมพ์เอกสาร', 'เครื่องพิมพ์', 9),

-- แผนก IT
('SV-IT-001', 'Server Dell PowerEdge R740', 'เซิร์ฟเวอร์', 1),
('SW-IT-001', 'Switch Cisco Catalyst 48 Port', 'อุปกรณ์เครือข่าย', 1),
('RT-IT-001', 'Router Cisco ISR 4000', 'อุปกรณ์เครือข่าย', 1),
('FW-IT-001', 'Firewall Fortinet FortiGate', 'อุปกรณ์เครือข่าย', 1),
('UPS-IT-001', 'UPS APC Smart-UPS 3000VA', 'ระบบไฟสำรอง', 1);

-- 5. เพิ่มข้อมูลคำขอแจ้งซ่อมตัวอย่าง (request)
INSERT INTO request (User_ID, Assigned_IT_ID, Equip_ID, Req_Date, Req_Subject, Req_Detail, Current_Status, Priority) VALUES
-- คำขอที่เสร็จสิ้นแล้ว
(4, 2, 1, '2024-01-15 09:30:00', 'คอมพิวเตอร์เปิดไม่ติด', 'คอมพิวเตอร์ที่โต๊ะทำงานเปิดไม่ติด กดปุ่ม Power แล้วไม่มีไฟขึ้น', 'เสร็จสิ้น', 'ด่วน'),
(5, 2, 7, '2024-01-16 10:15:00', 'เครื่องพิมพ์ไม่สามารถพิมพ์ได้', 'เครื่องพิมพ์ขึ้นข้อความ Error แล้วไม่สามารถพิมพ์เอกสารได้', 'เสร็จสิ้น', 'ปานกลาง'),

-- คำขอที่กำลังดำเนินการ
(6, 3, 8, '2024-01-18 14:20:00', 'คอมพิวเตอร์ช้ามาก', 'คอมพิวเตอร์ทำงานช้ามาก เปิดโปรแกรมนานมาก', 'กำลังดำเนินการ', 'ปานกลาง'),
(7, 2, 11, '2024-01-19 08:45:00', 'เครื่องพิมพ์ใบสั่งยาไม่ทำงาน', 'เครื่องพิมพ์ใบสั่งยาไม่สามารถพิมพ์ได้ ขึ้นไฟแดงกระพริบ', 'กำลังดำเนินการ', 'ด่วนมาก'),

-- คำขอที่รอรับงาน
(8, NULL, 18, '2024-01-20 11:00:00', 'คอมพิวเตอร์ไม่สามารถเชื่อมต่ออินเทอร์เน็ตได้', 'คอมพิวเตอร์ไม่สามารถเชื่อมต่ออินเทอร์เน็ตได้ ไม่สามารถเข้าระบบงานได้', 'รอรับงาน', 'ด่วน'),
(4, NULL, 3, '2024-01-20 13:30:00', 'เครื่องพิมพ์พิมพ์ไม่ชัด', 'เครื่องพิมพ์พิมพ์ออกมาไม่ชัด ตัวอักษรจางมาก', 'รอรับงาน', 'ไม่ด่วน'),
(5, NULL, 5, '2024-01-21 09:00:00', 'คอมพิวเตอร์ค้าง', 'คอมพิวเตอร์ค้างบ่อยมาก ต้อง Restart หลายครั้ง', 'รอรับงาน', 'ปานกลาง');

-- 6. เพิ่มข้อมูลผลการดำเนินการ (resolution) สำหรับงานที่เสร็จแล้ว
INSERT INTO resolution (Req_ID, IT_User_ID, Start_Date, End_Date, Action_Taken, Resolution_Detail) VALUES
(1, 2, '2024-01-15 10:00:00', '2024-01-15 11:30:00', 'เปลี่ยนสายไฟ Power Supply', 'ตรวจสอบพบว่าสายไฟ Power Supply ชำรุด ทำการเปลี่ยนสายไฟใหม่ ทดสอบเปิดเครื่องได้ปกติ'),
(2, 2, '2024-01-16 11:00:00', '2024-01-16 11:45:00', 'ล้างหัวพิมพ์และเปลี่ยนตลับหมึก', 'ตรวจสอบพบว่าหัวพิมพ์อุดตัน และตลับหมึกหมด ทำการล้างหัวพิมพ์และเปลี่ยนตลับหมึกใหม่ ทดสอบพิมพ์ได้ปกติ');
